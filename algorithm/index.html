<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>智慧遊戲選購導覽系統｜期末展示版</title>

<style>
:root{
  --bg:#f5f7fb;
  --panel:#ffffff;
  --text:#111827;
  --muted:#6b7280;
  --line:#e5e7eb;

  --primary:#2563eb;
  --primary2:#1d4ed8;
  --success:#16a34a;
  --warn:#f59e0b;

  --chip:#eef2ff;
  --shadow:0 10px 28px rgba(17,24,39,.08);
  --radius:14px;
}

*{ box-sizing:border-box; }
body{
  margin:0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Noto Sans TC", sans-serif;
  background:var(--bg);
  color:var(--text);
}

/* ===== Layout ===== */
.layout{
  display:grid;
  grid-template-columns: 300px 1fr;
  min-height:100vh;
}

/* ===== Sidebar ===== */
.sidebar{
  background:#fff;
  border-right:1px solid var(--line);
  padding:16px;
}
.sidebar h1{
  font-size:16px;
  margin:0 0 4px 0;
}
.sidebar p{
  margin:0 0 14px 0;
  font-size:12px;
  color:var(--muted);
}
.stepBtn{
  width:100%;
  border:1px solid var(--line);
  background:#fff;
  border-radius:12px;
  padding:12px;
  margin-bottom:10px;
  cursor:pointer;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.stepBtn[disabled]{ opacity:.45; cursor:not-allowed; }
.badge{
  font-size:12px;
  padding:4px 10px;
  border-radius:999px;
  border:1px solid var(--line);
}
.badge.active{ background:var(--chip); color:var(--primary2); }
.badge.done{ background:#ecfdf5; color:var(--success); }

/* ===== Main ===== */
.main{
  padding:18px;
}
.grid{
  display:grid;
  grid-template-columns: 1.2fr .8fr;
  gap:16px;
}
.card{
  background:var(--panel);
  border:1px solid var(--line);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:16px;
}
.card h2{
  margin:0 0 8px 0;
  font-size:16px;
}
.muted{ color:var(--muted); font-size:13px; }

/* ===== Controls ===== */
.controls{
  display:flex;
  gap:10px;
  margin:12px 0;
}
.btn{
  border:none;
  border-radius:10px;
  padding:8px 14px;
  cursor:pointer;
  font-weight:600;
}
.btn.primary{ background:var(--primary); color:#fff; }
.btn.primary:hover{ background:var(--primary2); }
.btn.ghost{ background:#f3f4f6; border:1px solid var(--line); }

/* ===== Result ===== */
.resultBox{
  background:#f9fafb;
  border:1px dashed var(--line);
  border-radius:12px;
  padding:12px;
  margin-top:10px;
}
.resultBox ul{
  margin:6px 0 0 18px;
  font-size:13px;
  line-height:1.6;
}

/* ===== Algo side ===== */
.chip{
  display:inline-block;
  font-size:12px;
  padding:4px 10px;
  border-radius:999px;
  background:var(--chip);
  border:1px solid #c7d2fe;
  color:var(--primary2);
  margin-right:6px;
}
</style>
</head>

<body>
<div class="layout">

<!-- ===== Sidebar ===== -->
<aside class="sidebar">
  <h1>智慧遊戲選購系統</h1>
  <p>演算法期末專題｜展示版</p>

  <button class="stepBtn" id="btn1" onclick="goStep(1)">
    Step 1｜KNN <span class="badge active" id="b1">進行中</span>
  </button>
  <button class="stepBtn" id="btn2" onclick="goStep(2)" disabled>
    Step 2｜Hash <span class="badge" id="b2">鎖定</span>
  </button>
  <button class="stepBtn" id="btn3" onclick="goStep(3)" disabled>
    Step 3｜Binary Search <span class="badge" id="b3">鎖定</span>
  </button>
  <button class="stepBtn" id="btn4" onclick="goStep(4)" disabled>
    Step 4｜Union-Find <span class="badge" id="b4">鎖定</span>
  </button>
  <button class="stepBtn" id="btn5" onclick="goStep(5)" disabled>
    Step 5｜Greedy + DP <span class="badge" id="b5">鎖定</span>
  </button>
  <button class="stepBtn" id="btn6" onclick="goStep(6)" disabled>
    Step 6｜Max Flow <span class="badge" id="b6">鎖定</span>
  </button>
</aside>

<!-- ===== Main ===== -->
<main class="main">
<div class="grid">

<!-- ===== Center ===== -->
<section class="card">
  <h2 id="stepTitle">Step 1｜KNN：找相似玩家</h2>
  <p class="muted" id="stepDesc">
    系統將你的偏好向量，與其他玩家比較距離，找出最相似的玩家。
  </p>

  <div class="controls">
    <button class="btn primary" onclick="runStep()">執行本步驟</button>
    <button class="btn ghost" onclick="confirmStep()">確定</button>
    <button class="btn primary" onclick="nextStep()">下一步 →</button>
  </div>

  <div class="resultBox" id="resultBox">
    請執行本步驟。
  </div>
</section>

<!-- ===== Right ===== -->
<aside class="card">
  <h2>演算法說明</h2>
  <div id="algoName">KNN（K-Nearest Neighbors）</div>
  <div style="margin:6px 0;">
    <span class="chip">以距離衡量相似</span>
    <span class="chip">非參數式</span>
  </div>
  <ul class="muted" id="algoExplain">
    <li>將使用者與資料集中所有玩家比較</li>
    <li>距離越小，代表偏好越相似</li>
    <li>推薦系統常用於找相似用戶</li>
  </ul>

  <hr style="margin:14px 0;">

  <h2>每一步結論</h2>
  <div class="muted"><b>本步結論</b></div>
  <div id="currentConclusion" class="muted">尚未執行</div>

  <div class="muted" style="margin-top:8px;"><b>流程結論</b></div>
  <ul id="historyConclusion" class="muted">
    <li>尚未開始</li>
  </ul>
</aside>

</div>
</main>
</div>

<script>
/* ===== 中文顯示用 ===== */
const tagZh = {
  action:"動作",
  narrative:"敘事",
  puzzle:"解謎",
  text:"文字"
};

/* ===== State ===== */
let step = 1;
let history = [];
let lastResult = "";

/* ===== Step control ===== */
function goStep(s){ step = s; }
function nextStep(){
  if(step < 6){
    document.getElementById("btn"+(step+1)).disabled = false;
    document.getElementById("b"+step).className = "badge done";
    document.getElementById("b"+(step+1)).className = "badge active";
    step++;
  }
}
function confirmStep(){
  document.getElementById("currentConclusion").innerText = lastResult;
  history.push(`Step ${step}：${lastResult}`);
  const ul = document.getElementById("historyConclusion");
  ul.innerHTML = "";
  history.forEach(h=>{
    const li=document.createElement("li");
    li.innerText=h;
    ul.appendChild(li);
  });
}

/* ===== Run Step (展示版摘要) ===== */
function runStep(){
  let box = document.getElementById("resultBox");
  if(step===1){
    lastResult = "成功找到 5 位偏好最相近的玩家，作為推薦依據。";
    box.innerHTML = `
      <b>KNN 計算完成</b>
      <ul>
        <li>以使用者偏好向量為基準</li>
        <li>計算與其他玩家的距離</li>
        <li>選出距離最小的 5 位玩家</li>
      </ul>
    `;
  }
  if(step===2){
    lastResult = "整合相似玩家收藏庫，建立候選遊戲池。";
    box.innerHTML = `
      <b>候選遊戲產生</b>
      <ul>
        <li>合併相似玩家的遊戲清單</li>
        <li>透過雜湊結構快速去重</li>
      </ul>
    `;
  }
  if(step===3){
    lastResult = "依時間上限篩選，留下實際玩得完的遊戲。";
    box.innerHTML = `
      <b>時間限制篩選完成</b>
      <ul>
        <li>依遊玩時間排序</li>
        <li>用二元搜尋找出可行範圍</li>
      </ul>
    `;
  }
  if(step===4){
    lastResult = "合併同款不同版本，避免推薦重複。";
    box.innerHTML = `
      <b>版本去重完成</b>
      <ul>
        <li>以 groupId 視為同一款遊戲</li>
      </ul>
    `;
  }
  if(step===5){
    lastResult = "在時間限制下，找到符合度最高的遊戲組合。";
    box.innerHTML = `
      <b>最佳化完成</b>
      <ul>
        <li>先以貪婪法產生候選</li>
        <li>再用動態規劃求最佳解</li>
      </ul>
    `;
  }
  if(step===6){
    lastResult = "平衡遊戲類型，避免推薦結果偏向單一類型。";
    box.innerHTML = `
      <b>推薦清單平衡完成</b>
      <ul>
        <li>限制各類型最大數量</li>
        <li>確保多樣性</li>
      </ul>
    `;
  }
}
</script>
</body>
</html>
